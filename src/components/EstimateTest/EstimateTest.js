import React, { useContext, useEffect, useRef, useState } from 'react';

import toast from 'react-hot-toast';

import { apiRequest } from '../../api';
import { Context } from '../../Context';

import '../Quiz/Quiz.scss';

const questions = [
  {
    answers: [
      {
        answer: '—Å—Ä–∞–≤–Ω—é —Å—Ç–∞–≤–∫–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º –∏ –≤—ã–±–µ—Ä—É —Ç–æ—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Å—Ç–∞–≤–∫–∞ –≤—ã—à–µ',
        id: 1,
      },
      {
        answer: '—Å—Ä–∞–≤–Ω—é –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º –∏ –≤—ã–±–µ—Ä—É —Ç–æ—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –≤—ã—à–µ',
        id: 2,
      },
      {
        answer: '–≤—ã–ø–æ–ª–Ω—é –ø—É–Ω–∫—Ç—ã —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤—ã—à–µ',
        id: 3,
      },
      {
        answer: '–±—Ä–æ—à—É –º–æ–Ω–µ—Ç–∫—É üòä',
        id: 4,
      },
      {
        answer: '–Ω–∏ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ',
        id: 5,
      },
    ],
    correct_answer: [5],
    input_type: 'radio',
    question: '–í —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –í–∞—Å –µ—Å—Ç—å –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤, –∫–∞–∫ –í—ã –≤—ã–±–µ—Ä–µ—Ç–µ –∫—Ä–µ–¥–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–æ–¥–Ω–µ–µ –ø–æ–≥–∞—à–∞—Ç—å –¥–æ—Å—Ä–æ—á–Ω–æ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å? ',
  },
  {
    answers: [
      { answer: "—Å—Ç–æ–∏–º–æ—Å—Ç—å –∂–∏–ª—å—è –∏ –≤–µ–ª–∏—á–∏–Ω—É –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –≤–∑–Ω–æ—Å–∞", id: 1 },
      { answer: "—Å—Ç–∞–≤–∫—É –∏ —Å—Ä–æ–∫ –∏–ø–æ—Ç–µ–∫–∏", id: 2 },
      { answer: "—Å—Ç–æ–∏–º–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –ø–æ–∫—É–ø–∞–µ–º–æ–≥–æ –∂–∏–ª—å—è", id: 3 },
      { answer: "–∏–Ω—Ñ–ª—è—Ü–∏—é", id: 4 },
      { answer: "–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π", id: 5 }
    ],
    correct_answer: [1, 2, 3, 4, 5],
    input_type: "checkbox",
    question: "–ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏—è –æ –ø–æ–∫—É–ø–∫–µ –∂–∏–ª—å—è –∏ –∏–ø–æ—Ç–µ–∫–µ –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ –≤–∞–∂–Ω—ã–º —É—á–∏—Ç—ã–≤–∞—Ç—å?"
  },
  {
    answers: [
      { answer: "—Å—É–º–º—É –∏ —Å—Ç–∞–≤–∫—É –∫—Ä–µ–¥–∏—Ç–∞", id: 1 },
      { answer: "–≤–µ–ª–∏—á–∏–Ω—É –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞", id: 2 },
      { answer: "–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π", id: 3 },
      { answer: "–∏–Ω—Ñ–ª—è—Ü–∏—é", id: 4 },
      { answer: "—Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫—É (–ø–æ –∫—Ä–µ–¥–∏—Ç—É)", id: 5 }
    ],
    correct_answer: [1, 3, 4, 5],
    input_type: "checkbox",
    question: "–ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏—è –æ —Ç–æ–º, —Å—Ç–æ–∏—Ç –ª–∏ –¥–æ—Å—Ä–æ—á–Ω–æ –ø–æ–≥–∞—à–∞—Ç—å –∫—Ä–µ–¥–∏—Ç, –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ –≤–∞–∂–Ω—ã–º —É—á–∏—Ç—ã–≤–∞—Ç—å?"
  },
  {
    answers: [
      { answer: "—Å—Ä–∞–≤–Ω—é –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º –¥–æ –∏ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è", id: 1 },
      { answer: "—Å—Ä–∞–≤–Ω—é —Å—Ç–∞–≤–∫—É –¥–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∫—Ä–µ–¥–∏—Ç–∞–º –∏ —Å—Ç–∞–≤–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∏ —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–∏", id: 2 },
      { answer: "—Å—Ä–∞–≤–Ω—é —Å—É–º–º—É —É–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö (—Å —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –±–µ–∑ –Ω–µ–≥–æ)", id: 3 },
      { answer: "—Å—Ä–∞–≤–Ω—é —Å—É–º–º—É –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—É—é –≤—ã —É–ø–ª–∞—Ç–∏—Ç–µ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è, —Å —Å—É–º–º–æ–π –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∫ —É–ø–ª–∞—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∫—Ä–µ–¥–∏—Ç–∞–º", id: 4 },
      { answer: "–Ω–µ—Ç –≤–µ—Ä–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞", id: 5 }
    ],
    correct_answer: [4],
    input_type: "radio",
    question: "–ö–∞–∫ –í—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –≤—ã–≥–æ–¥–Ω–æ –ª–∏ –í–∞–º —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∫—Ä–µ–¥–∏—Ç—ã?"
  },
  {
    answers: [
      { answer: "–ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ –∫—Ä–µ–¥–∏—Ç—É", id: 1 },
      { answer: "—Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ", id: 2 },
      { answer: "–ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –∏ –∏–∑–Ω–æ—Å –∞–≤—Ç–æ–º–æ–±–∏–ª—è (% –ø–æ—Ç–µ—Ä–∏ –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º)", id: 3 },
      { answer: "—Ä–∞—Å—Ö–æ–¥ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è", id: 4 },
      { answer: "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–µ—Å—ë—Ç–µ, –Ω–µ –∏–º–µ—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è", id: 5 },
      { answer: "–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π", id: 6 }
    ],
    correct_answer: [1, 2, 3, 4, 6],
    input_type: "checkbox",
    question: "–í—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–∫—É–ø–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ –∫—Ä–µ–¥–∏—Ç –∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Å–≤–æ—ë —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ö–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã –í—ã —Å—á–∏—Ç–∞–µ—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –ø—Ä–∏ —ç—Ç–æ–º —É—á–∏—Ç—ã–≤–∞—Ç—å?"
  },
  {
    answers: [
      { answer: "–≤–∞—Ä–∏–∞–Ω—Ç 1", id: 1 },
      { answer: "–≤–∞—Ä–∏–∞–Ω—Ç 2", id: 2 },
      { answer: "–ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ", id: 3 }
    ],
    correct_answer: [2],
    input_type: "radio",
    question: "–£ –í–∞—Å –µ—Å—Ç—å 1 –º–ª–Ω. —Ä—É–±., –∏ –í–∞–º –Ω—É–∂–Ω–æ —Ä–µ—à–∞—Ç—å ¬´–∂–∏–ª–∏—â–Ω—ã–π –≤–æ–ø—Ä–æ—Å¬ª. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:" +
        "<br/> <br/> &emsp; <i>–í–∞—Ä–∏–∞–Ω—Ç</i> 1: –í–Ω–µ—Å—Ç–∏ –µ–≥–æ –∫–∞–∫ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å, –∫—É–ø–∏—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—É –∑–∞ 6 –º–ª–Ω. —Ä—É–±. –≤ –∏–ø–æ—Ç–µ–∫—É –Ω–∞ 20 –ª–µ—Ç —Å–æ —Å—Ç–∞–≤–∫–æ–π 10% –∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–æ–π –∫—Ä–µ–¥–∏—Ç–∞ 1% –≤ –≥–æ–¥." +
        "<br/> &emsp; <i>–í–∞—Ä–∏–∞–Ω—Ç</i> 2: –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —ç—Ç—É –∫–≤–∞—Ä—Ç–∏—Ä—É –∑–∞ 20 —Ç—ã—Å. —Ä—É–±. –≤ –º–µ—Å—è—Ü, –∞ –∏–º–µ—é—â–∏–π—Å—è 1 –º–ª–Ω. —Ä—É–±. –≤–ª–æ–∂–∏—Ç—å –ø–æ–¥ 10% –≥–æ–¥–æ–≤—ã—Ö." +
        "<br/> <br/> –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–º, –µ—Å–ª–∏ –µ–∂–µ–≥–æ–¥–Ω—ã–π —Ä–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∞–µ–º–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã —Ä–∞–≤–µ–Ω —Ä–æ—Å—Ç—É –∞—Ä–µ–Ω–¥–Ω–æ–π –ø–ª–∞—Ç—ã –∏ –≥–æ–¥–æ–≤–æ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ –∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 6%?"
  },
  {
    answers: [
      { answer: "–¥–æ—Å—Ä–æ—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–∞", id: 1 },
      { answer: "–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –¥–µ–Ω–µ–≥ –∏ –ø–æ–≥–∞—à–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–∞ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É", id: 2 },
      { answer: "–ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ", id: 3 }
    ],
    correct_answer: [2],
    input_type: "radio",
    question: "–ì–æ–¥ –Ω–∞–∑–∞–¥ –í—ã –≤–∑—è–ª–∏ –∫—Ä–µ–¥–∏—Ç 300 —Ç—ã—Å. —Ä—É–±. —Å—Ä–æ–∫–æ–º –Ω–∞ 3 –≥–æ–¥–∞ —Å–æ —Å—Ç–∞–≤–∫–æ–π 18% –≥–æ–¥–æ–≤—ã—Ö, –≤ —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞ –ø–ª–∞—Ç–µ–∂–∏ –≤–Ω–æ—Å–∏–ª–∏—Å—å –ø–æ –≥—Ä–∞—Ñ–∏–∫—É. –°–µ–≥–æ–¥–Ω—è —É –í–∞—Å –ø–æ—è–≤–∏–ª–∞—Å—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å –¥–æ—Å—Ä–æ—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ –ø–æ —ç—Ç–æ–º—É –∫—Ä–µ–¥–∏—Ç—É –Ω–∞ 200 —Ç—ã—Å. —Ä—É–±. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤–ª–æ–∂–∏—Ç—å —ç—Ç–∏ –¥–µ–Ω—å–≥–∏ –ø–æ–¥ 12% –≥–æ–¥–æ–≤—ã—Ö. –ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–æ–¥–Ω–µ–µ?"
  },
  {
    answers: [
      {
        answer: "–∞–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç",
        id: 1
      },
      {
        answer: "–∏–ø–æ—Ç–µ–∫–∞",
        id: 2
      },
      {
        answer: "–ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ",
        id: 3
      },
    ],
    correct_answer: [2],
    input_type: "radio",
    question: "–ù–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å —É –í–∞—Å –µ—Å—Ç—å –¥–≤–∞ –∫—Ä–µ–¥–∏—Ç–∞:<br><br>" +
        "&emsp;1) –ê–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç, –≤–∑—è—Ç 2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ –Ω–∞ —Å—Ä–æ–∫ 5 –ª–µ—Ç, —Å–æ —Å—Ç–∞–≤–∫–æ–π 14% –≥–æ–¥–æ–≤—ã—Ö –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –µ–∂–µ–≥–æ–¥–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ ‚Äì 4% –æ—Ç –¥–æ–ª–≥–∞ –ø–æ –∫—Ä–µ–¥–∏—Ç—É)<br>" +
        "&emsp;2) –ò–ø–æ—Ç–µ–∫–∞, –≤–∑—è—Ç–∞ 7 –ª–µ—Ç –Ω–∞–∑–∞–¥ –Ω–∞ —Å—Ä–æ–∫ 15 –ª–µ—Ç, —Å–æ —Å—Ç–∞–≤–∫–æ–π 9% –≥–æ–¥–æ–≤—ã—Ö –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –µ–∂–µ–≥–æ–¥–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∫–≤–∞—Ä—Ç–∏—Ä—ã (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ ‚Äì 0,7% –æ—Ç –¥–æ–ª–≥–∞ –ø–æ –∫—Ä–µ–¥–∏—Ç—É)<br><br>" +
        "–ö–∞–∫–æ–π –∏–∑ –∫—Ä–µ–¥–∏—Ç–æ–≤ –í–∞–º —Å–µ–≥–æ–¥–Ω—è –≤—ã–≥–æ–¥–Ω–µ–µ –ø–æ–≥–∞—à–∞—Ç—å –¥–æ—Å—Ä–æ—á–Ω–æ, –µ—Å–ª–∏ –µ–∂–µ–≥–æ–¥–Ω–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 7%?",
  },
  {
    answers: [
      {
        answer: "–æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è",
        id: 1
      },
      {
        answer: "–ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ",
        id: 2
      },
      {
        answer: "—Ä–∞–∑–Ω–∏—Ü—ã –Ω–µ—Ç (–æ—á–µ–Ω—å –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞)",
        id: 3
      },
    ],
    correct_answer: [1],
    input_type: "radio",
    question: "–£ –í–∞—Å –µ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ —Å—É–º–º—É 500 —Ç—ã—Å. —Ä—É–±. –ø–æ —Å—Ç–∞–≤–∫–µ 19% –≥–æ–¥–æ–≤—ã—Ö, –≤–∑—è—Ç—ã–π 2 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ –Ω–∞ —Å—Ä–æ–∫ 3,5 –≥–æ–¥–∞, –ø–ª–∞—Ç–µ–∂–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç—É –≤–Ω–æ—Å–∏–ª–∏—Å—å —Å—Ç—Ä–æ–≥–æ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É. <br/>–°–µ–≥–æ–¥–Ω—è –í–∞–º –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ "+
      "—Ä–µ—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–∞ —Å –Ω–æ–≤—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ ‚Äì —Å—Ç–∞–≤–∫–æ–π 9% –≥–æ–¥–æ–≤—ã—Ö –∏ —Å—Ä–æ–∫–æ–º 3 –≥–æ–¥–∞, —Å —Ä–∞–∑–æ–≤–æ–π —É–ø–ª–∞—Ç–æ–π —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –≤ 7 —Ç—ã—Å. —Ä—É–±.<br>" +
        "–ß—Ç–æ –¥–ª—è –í–∞—Å –±—ã–ª–æ –±—ã –≤—ã–≥–æ–¥–Ω–µ–µ?",
  },
  {
    answers: [
      {
        answer: "–ø–æ–ª—É—á—É –≤—ã–≥–æ–¥—É –±–æ–ª–µ–µ 200 —Ç—ã—Å. —Ä—É–±",
        id: 1
      },
      {
        answer: "–ø–æ–ª—É—á—É –≤—ã–≥–æ–¥—É –±–æ–ª–µ–µ 100 —Ç—ã—Å. —Ä—É–±.",
        id: 2
      },
      {
        answer: "–Ω–µ –±—É–¥–µ—Ç –Ω–∏ –≤—ã–≥–æ–¥, –Ω–∏ –ø–æ—Ç–µ—Ä—å ",
        id: 3
      },
      {
        answer: "–ø–æ–Ω–µ—Å—É –ø–æ—Ç–µ—Ä–∏ –º–µ–Ω–µ–µ 100 —Ç—ã—Å. —Ä—É–±.",
        id: 4
      },
      {
        answer: "–ø–æ–Ω–µ—Å—É –ø–æ—Ç–µ—Ä–∏ –æ—Ç 100 –¥–æ 200 —Ç—ã—Å. —Ä—É–±.",
        id: 5
      },
      {
        answer: "–ø–æ–Ω–µ—Å—É –ø–æ—Ç–µ—Ä–∏ –±–æ–ª–µ–µ 200 —Ç—ã—Å. —Ä—É–±.",
        id: 6
      },
    ],
    correct_answer: [6],
    input_type: "radio",
    question: "–í—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–∫—É–ø–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∑–∞ 1 600 —Ç—ã—Å. —Ä—É–±., —Å–¥–µ–ª–∞–≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å –≤ 500 —Ç—ã—Å. —Ä—É–±. –∏ –≤–∑—è–≤ –æ—Å—Ç–∞–≤—à—É—é—Å—è —Å—É–º–º—É –≤ –∫—Ä–µ–¥–∏—Ç –ø–æ–¥ 14% –≥–æ–¥–æ–≤—ã—Ö –Ω–∞ 5 –ª–µ—Ç —Å" +
    "–æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –µ–∂–µ–≥–æ–¥–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–∑–∞ 5% –æ—Ç –æ—Å—Ç–∞—Ç–∫–∞ –¥–æ–ª–≥–∞ –ø–æ –∫—Ä–µ–¥–∏—Ç—É). <br/>–í—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –≤–ª–∞–¥–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤" +
    "—Å—É–º–º–µ 12 —Ç—ã—Å. —Ä—É–±. –∏ –µ–∂–µ–≥–æ–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ 45 —Ç—ã—Å. —Ä—É–±. (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –Ω–∞–ª–æ–≥, –û–°–ê–ì–û, —Ç–µ—Ö. –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ). –ü—Ä–∏ —ç—Ç–æ–º —Å–µ–π—á–∞—Å –í–∞—à–∏ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç 15 —Ç—ã—Å. —Ä—É–±.<br><br>" +
        "–í —Ç–æ –∂–µ –≤—Ä–µ–º—è, –í—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç–µ, —á—Ç–æ –¥–∞–∂–µ —Å —É—á–µ—Ç–æ–º –∏–∑–Ω–æ—Å–∞, –í–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ –≤ —Ü–µ–Ω–µ –Ω–∞ 10% –≤ –≥–æ–¥, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä–∫–∞.<br><br>" +
        "–û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –æ—Ç –ø–æ–∫—É–ø–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –¥–æ—Ö–æ–¥ —Å–æ —Å–≤–æ–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤ –≤ 10% –≥–æ–¥–æ–≤—ã—Ö, –∞ –≥–æ–¥–æ–≤–∞—è" +
          "–∏–Ω—Ñ–ª—è—Ü–∏—è –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 7%?",
  },
];

function EstimateTest({setActiveStarttestTabIndex}) {
  const {setStartTestResults } = useContext(Context);
  const inputRefs = useRef([]);

  const [activeQuestion, setActiveQuestion] = useState(0);
  const [selectedAnswer, setSelectedAnswer] = useState([]);
  const [result, setResult] = useState(0);

  const {
    question,
    answers,
    correct_answer,
    input_type
  } = questions[activeQuestion];

  const onClickNext = async (e) => {
    if (e.target.innerText === "–ó–ê–í–ï–†–®–ò–¢–¨") {
      let data = {
        num1: result,
        token: localStorage.getItem('token'),
      };

      const response = await apiRequest({
        data: data,
        method: 'POST',
        url: '/set-start-test',
      });

      if (response.code === 0 && response.http_status === 200) {
        setStartTestResults((prev) => ({...prev, num1: result}));
        setActiveStarttestTabIndex();
      } else {
        toast.error(response.mes);
      }

    } else {

      const allNumbersExist = correct_answer.every(num => selectedAnswer.includes(num));

      if (allNumbersExist) {
        setResult((prev) => prev + 1);
      }

      setSelectedAnswer([]);
      setActiveQuestion((prev) => prev + 1);
    }
  };

  useEffect(() => {
    inputRefs.current.map((el) => {
      if (el) el.checked = false;
    });
  }, [question]);

  const onAnswerSelected = (answer, e) => {
    if (e.target.checked) {
      input_type === 'checkbox'? setSelectedAnswer((prev) => [...prev, answer.id]): setSelectedAnswer([answer.id]);
    } else {
      const filteredAnswers = selectedAnswer.filter(item => item.id !== answer.id);

      input_type === 'checkbox'? setSelectedAnswer(filteredAnswers): setSelectedAnswer([answer.id]);
    }
  };

  let activeNum = activeQuestion + 1;
  let dynamicWidth = 'calc(100% * ' + activeNum + '/' + questions.length + ')';

  return (
    <div className="quiz-container">
      <div className="testingBlock">
        <div className="progress-counter">
          <span className="active-question-no">{activeQuestion + 1}</span>
          <span className="total-question">
            &nbsp;–∏–∑&nbsp;{questions.length}
          </span>
        </div>
        <div className="progress-bar" id="progress-bar">
          <div
            id="progressBarFull"
            style={{
              width: dynamicWidth,
            }}
          ></div>
        </div>
        <h3 className="mt-4rem" dangerouslySetInnerHTML={{ __html: question }}></h3>
        <form className="answers_block">
          {answers.map((answer, index) => (
            <div key={index} className="form_check">
              <input
                key={answer.id}
                ref={el => inputRefs.current[index] = el}
                className="firstTestForm"
                id={'inputDefault' + index}
                name='inputDefault'
                type={input_type}
                onChange={(e) => onAnswerSelected(answer, e)}
              />
              <label
                className="form_check_label"
                htmlFor={'inputDefault' + index}
              >
                {answer.answer}
              </label>
            </div>
          ))}
        </form>
        <div className="answers-info">
          {input_type === 'checkbox'
            ? '* - –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤'
            : ''}
        </div>
        <div className="flex-right">
          <button
            disabled={!selectedAnswer.length}
            onClick={(e) => onClickNext(e)}
          >
            {activeQuestion === questions.length - 1 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å' : '–î–∞–ª—å—à–µ'}
          </button>
        </div>
      </div>
    </div>
  );
}

export default EstimateTest;

